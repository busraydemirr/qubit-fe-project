<ng-container *ngIf="ksCard$ | async as card">
  <app-banner [label]="card.name!" [subLabel]="card.code!"></app-banner>
</ng-container>

<div class=" w-auto detail-background">
  <!-- <form [formGroup]="cashFilterForm" class="flex w-full gap-4 px-3 mb-3">
    <mat-form-field [appearance]="'fill'" class="w-1/3">
      <input matInput placeholder="Isim" formControlName="name" />
    </mat-form-field>
    <mat-form-field [appearance]="'fill'" class="w-1/3">
      <input matInput placeholder="Cep Telefonu" formControlName="phoneNumber" type="number"
        pattern="[0-9]{3}[0-9]{3}[0-9]{4}" maxlength="10" onKeyPress="if(this.value.length==10) return false;" />
      <mat-hint>
        <mat-icon> info </mat-icon>
        Başında 0 olmadan giriniz.
      </mat-hint>
    </mat-form-field>
    <mat-form-field [appearance]="'fill'" class="w-1/3">
      <input matInput placeholder="E-Posta" formControlName="email" type="email" />
    </mat-form-field>
    <button mat-icon-button
      class="menu-icon text-qub-tertiary bg-qub-secondary shadow-md flex items-center justify-center mt-2 ml-auto shadow-lg"
      (click)="filter()">
      <mat-icon fontIcon="search"></mat-icon>
    </button>
  </form> -->
  <mat-tab-group>
    <mat-tab label="Genel Bilgiler" labelClass="bg-qub-primary">
      <ng-container *ngIf="(loading$ | async); else content">
        <div class="flex w-full items-center justify-center p-8">
          <mat-spinner></mat-spinner>
        </div>
      </ng-container>
      <ng-template #content>
        <ng-container *ngIf="ksCard$ | async as card">
          <div class="p-8 h-screen">
            <div class="w-full table-background">
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Kullanım
                  durumu </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0">
                  {{renderStatus(card.active!)}} </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0">
                  Adres </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.addr1! +
                  card.addr2!}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0">
                  Oluşturulma Tarihi
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0">
                  {{card.capiblockCreadeddate | date: 'dd/MM/yyyy'}} </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0">
                  Oluşturan
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0">
                  {{card.capiblockNameCreatedby}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Kod </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.code}} </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Yetki Kodu
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.cyphcode}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Açıklama
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.explain}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Hesap Adı
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.name}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Kayıt Durumu
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0">
                  {{renderRectStatus(card.recstatus!)}}
                </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0 !border-r-0"> Veri Merkezi
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-b-0"> {{card.siteid}} </span>
              </div>
              <div class="flex w-full content-between flex-wrap flex-row">
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400 !border-r-0"> Özel Kod
                </span>
                <span class="flex w-1/2 py-1 px-2 border border-1 border-gray-400"> {{card.specode}}
                </span>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-template>
    </mat-tab>
    <mat-tab label="Kasa Hareketleri" labelClass="bg-qub-primary">
      <app-cash-transaction-detail-list [cashId]="cashId" class="!h-screen"></app-cash-transaction-detail-list>
    </mat-tab>
  </mat-tab-group>
</div>